## HTTPS

[toc]

#### 发展流程

> 从问题到解决方案一步步解释HTTPS怎么保证通信安全的

最初需要客户端访问服务器，有了第一套方案：

![http-1](图片\http-1.jpg)

这一方案很好的解决了通信的问题，但是没有考虑到安全性，明文传输信息很容易就被窃取了。

于是有了第二种方案：

![http-2](图片\http-2.jpg)

加个密就好了，不传明文坏人就没办法知道我们在聊什么了。来一个对称加密算法把传输的数据加密起来。

> **对称加密算法**也就是通信双方都持有相同的密钥，加密解密都用这个密钥进行。没有密钥的其他人就无法破解通信内容。

看起来很美好，但有个问题就是这密钥怎么给到服务器呢，直接明文传输密钥万一被盗取了岂不是白加密了，于是有了非对称加密算法。

> **非对称加密算法**也就是加密解密使用不同的密钥，只有加密密钥的一方无法解密数据，只有解密密钥的一方无法加密数据
>
> **注意：**不要认为加密的密钥就是公钥，解密的就是私钥，公钥私钥是根据密钥是否公开来判定。例如在进行签名时，CA(Certifi*ca*te Authority 颁发数字证书的机构)会使用私钥来加密（签名），浏览器会使用对应的公钥来解密（验签）。
>
> **公钥加密，私钥解密**
>
> **私钥签名，公钥验签**

![http-3](图片\http-3.jpg)

看起来很美好，但还是有问题，在于公钥S直接传给Client，万一中间被人换了怎么办，如下图所示

![http-4](图片\http-4.jpg)

> **中间人攻击**即在通信双方中间假扮对方来对信息进行窃取和篡改，而通信双方都以为是在跟真正的对方通信

在有中间人能够拦截通信内容的情况下，理论上是没有办法给一个“空白”的Client传递密钥的。即使你可以加密，但是客户端也得知道怎么解密，最终还是会传递一个能被中间人获取的密钥的。

那么就需要介入第三方来保证第一次的公钥传递不会被中间人篡改了。CA(Certifi*ca*te Authority)闪亮登场了，它的作用就是为了保障Server端传递的密钥不会被中间人篡改，那么它是如何做到的呢。

> 关于数字证书的详细信息：https://blog.csdn.net/lihuang319/article/details/79970774

![http-5](图片\http-5.jpg)



至此就讲大概的整个流程算是讲完了，还有一些具体的概念可能需要后续补充。